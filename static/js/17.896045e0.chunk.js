(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{283:function(e,t,a){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.title="".concat(e.title," | ALO")||!1,e.metaDescription=e.metaDescription||"ALO",document.title=e.title,document.querySelector('meta[name="description"]').setAttribute("content",e.metaDescription)}a.d(t,"a",function(){return n})},319:function(e,t,a){"use strict";a.r(t);var n=a(26),l=a(36),c=a(37),s=a(39),r=a(38),i=a(40),o=a(0),m=a.n(o),u=a(55),p=a(21),d=a(283),b=a(63),h=a(12),E=function(e,t){return function(a){var n={paymentID:e,id_token:t};a({type:h.c,payload:n})}},y=a(68),f=a(317),g=a(50),k=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(r.a)(t)).call.apply(e,[this].concat(c)))).state={qbank:{},paymentModal:!0},a.showModal=function(){0===a.state.qbank.price?console.log("Price is Zero"):a.setState({paymentModal:!0})},a.handleCancel=function(){a.setState({paymentModal:!1})},a.bkash_function=function(){bKash.init({paymentMode:"checkout",paymentRequest:{amount:y.a.getState().payment.price,intent:"sale"},createRequest:function(e){var t={amount:y.a.getState().payment.price,userID:y.a.getState().auth.user.id};console.log(y.a.getState().payment,y.a.getState().auth.user.id),b.a.post("/payment/bkash/create",JSON.stringify(t)).then(function(e){console.log(e),E(e.data.paymentID,e.data.id_token),bKash.create().onSuccess(e.data)}).catch(function(e){f.a.error({title:"Failed",content:m.a.createElement(o.Fragment,null,m.a.createElement("p",null,"Payment Failed!!!"))}),bKash.create().onError()})},executeRequestOnAuthorization:function(){console.log("Execution Called");var e=y.a.getState().payment,t=e.paymentID,a=e.id_token,n=e.productID,l={Authorization:a,paymentID:t,userID:y.a.getState().auth.user.id,qbank:n};b.a.post("/payment/bkash/execute",JSON.stringify(l)).then(function(e){var t=e.data;t&&null!=t.paymentID?(console.log("Payment Succesfull!!!"),f.a.success({title:"Success",content:m.a.createElement(o.Fragment,null,m.a.createElement("p",null,"Payment Succesfull!!"))}),setTimeout(function(){window.location.reload()},9e3)):t.message?f.a.error({title:"Failed",content:m.a.createElement(o.Fragment,null,m.a.createElement("p",null,t.message))}):(console.log("bkash error"),f.a.error({title:"Failed",content:m.a.createElement(o.Fragment,null,m.a.createElement("p",null,"Payment Failed!!"))}),bKash.execute().onError())}).catch(function(e){f.a.error({title:"Unsuccess!!!",content:m.a.createElement(o.Fragment,null,m.a.createElement("p",null,"Payment Unsuccess!!!"))}),console.log("site error"),bKash.create().onError()})},onClose:function(){f.a.error({title:"Cancelled",content:m.a.createElement(o.Fragment,null,m.a.createElement("p",null,"Payment Cancelled!!"))})}}),document.getElementById("bKash_button").removeAttribute("disabled")},a}return Object(i.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("/qbank/question-bank/".concat(this.props.match.params.qbank_name,"/")).then(function(t){e.props.bkashExecute(t.data.id,t.data.price),e.setState(Object(n.a)({},e.state,{qbank:t.data}))}).catch(function(t){e.setState(Object(n.a)({},e.state,{qbank:{name:"Error 404"}}))}),Object(d.a)({title:"".concat(this.props.match.params.qbank_name," - Question Bank")}),this.setState({paymentModal:!1})}},{key:"componentDidUpdate",value:function(e,t){t.qbank!==this.state.qbank&&0!==y.a.getState().payment.price&&(console.log("First Qbank and script"),console.log("bkash called!!!!!111111"),this.bkash_function())}},{key:"componentWillUnmount",value:function(){this.props.bkashCreate(null,null),this.props.bkashExecute(null,0),f.a.destroyAll()}},{key:"render",value:function(){var e=this.state.qbank;return m.a.createElement(o.Fragment,null,m.a.createElement("div",{className:"mdk-box bg-primary mdk-box--bg-primary js-mdk-box mb-0 mt-32pt","data-effects":"blend-background"},m.a.createElement("div",{className:"mdk-box__content"},m.a.createElement("div",{className:"hero py-64pt text-center text-sm-left"},m.a.createElement("div",{className:"container page__container"},m.a.createElement("div",{className:"d-flex flex-column flex-sm-row"},m.a.createElement("div",{className:"order-1 order-sm-0"},m.a.createElement("h1",{className:"text-white"},e.name),m.a.createElement("p",{className:"lead text-white-50 measure-hero-lead mb-24pt"},e.description),m.a.createElement("button",{onClick:this.showModal,className:"btn btn-outline-white"},"Enroll"))))),m.a.createElement("div",{className:"navbar navbar-expand-sm navbar-light bg-white border-bottom-2 navbar-list p-0 m-0 align-items-center",style:{position:"unset"}},m.a.createElement("div",{className:"container ",style:{position:"unset"}},m.a.createElement("ul",{className:"nav navbar-nav flex align-items-sm-center",style:{position:"unset"}},m.a.createElement("li",{className:"nav-item navbar-list__item"},m.a.createElement("span",{className:"material-icons icon--left"},"list"),m.a.createElement("strong",null,e.questionset?e.questionset.length:0," ","Question Set")),m.a.createElement("li",{className:"nav-item navbar-list__item"},m.a.createElement("span",{className:"material-icons icon--left"},"local_atm"),m.a.createElement("strong",null,e.price," BDT"))))))),m.a.createElement("div",{className:"mt-3 border-bottom-2",style:{position:"unset"}},m.a.createElement("div",{className:"container"},m.a.createElement("div",{className:"",style:{position:"unset"}},m.a.createElement("div",{className:""},m.a.createElement("h5",null,m.a.createElement("span",{className:"material-icons icon--left"},"expand_more"),"Subjects"),m.a.createElement("ul",{className:"list-unstyled ml-3"},e.subject?e.subject.map(function(e){return m.a.createElement("li",{key:e.id,className:"d-flex align-items-center"},m.a.createElement("h6",{className:""},m.a.createElement("span",{className:"material-icons text-50 mr-8pt"},"check"),e.name))}):m.a.createElement("li",{className:"d-flex align-items-center"},m.a.createElement("span",{className:"material-icons text-50 mr-8pt"},"check"),m.a.createElement("span",{className:"text-70"},"Empty"))))))),m.a.createElement("div",{className:"container bg-white",style:{position:"unset"}},e.questionset?e.questionset.map(function(e,t){return m.a.createElement("div",{key:e.id,className:"border-left-2 page-section pl-32pt pb-8pt"},0===t?null:m.a.createElement("hr",{className:"mt-0 pt-0"}),m.a.createElement("div",{className:"d-flex align-items-center page-num-container"},m.a.createElement("div",{className:"page-num"},t+1),m.a.createElement("h4",null,e.name)),m.a.createElement("p",{className:"text-70 mb-3"},e.description),m.a.createElement("p",{className:"h5"},"Topic:",e.topic.map(function(e,t){return m.a.createElement("strong",{key:e.id,className:"text-70"},0===t?" ":", "," ",t+1,". ",e.name)})),m.a.createElement(p.b,{className:"btn btn-primary",to:"#"},"Give Exam"))}):m.a.createElement("p",null)),m.a.createElement(f.a,{footer:[m.a.createElement(g.a,{className:"text-50",key:"back",onClick:this.handleCancel},"Close")],centered:!0,closable:!1,visible:this.state.paymentModal},m.a.createElement("div",null,m.a.createElement("button",{id:"bKash_button",disabled:!0,className:"btn btn-primary"},"Pay With bKash"))))}}]),t}(o.Component);t.default=Object(u.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,user:e.auth.user,payment:e.payment}},{bkashCreate:E,bkashExecute:function(e,t){return function(a){var n={productID:e,price:t};a({type:h.d,payload:n})}}})(k)}}]);
//# sourceMappingURL=17.896045e0.chunk.js.map